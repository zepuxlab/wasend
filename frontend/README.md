# WhatsApp Admin Panel - Amprio Milano

–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è WhatsApp —Ä–∞—Å—Å—ã–ª–∫–∞–º–∏ —á–µ—Ä–µ–∑ Meta WhatsApp Cloud API.

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                         FRONTEND                                 ‚îÇ
‚îÇ  React + Vite + TypeScript + TailwindCSS + shadcn/ui            ‚îÇ
‚îÇ  URL: http://localhost:5173                                      ‚îÇ
‚îÇ  –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å –±—ç–∫–µ–Ω–¥–∞               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                              ‚îÇ
                              ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                         BACKEND                                  ‚îÇ
‚îÇ  Node.js + Express + TypeScript                                  ‚îÇ
‚îÇ  URL: http://localhost:3001/api                                  ‚îÇ
‚îÇ  –•—Ä–∞–Ω–∏—Ç –í–°–ï —Å–µ–∫—Ä–µ—Ç—ã –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é                              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                              ‚îÇ
              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
              ‚ñº                               ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ       SUPABASE          ‚îÇ     ‚îÇ    META WHATSAPP API    ‚îÇ
‚îÇ  PostgreSQL Database    ‚îÇ     ‚îÇ    Cloud API v19.0      ‚îÇ
‚îÇ  Auth (email/password)  ‚îÇ     ‚îÇ    Webhooks             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Node.js 18+
- Bun 1.3+
- Supabase –ø—Ä–æ–µ–∫—Ç
- Meta WhatsApp Business Account
- Redis (–¥–ª—è –æ—á–µ—Ä–µ–¥–µ–π —Ä–∞—Å—Å—ã–ª–æ–∫)

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±—ç–∫–µ–Ω–¥–∞ (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –ü–ï–†–í–´–ú)

–ë—ç–∫–µ–Ω–¥ —Ö—Ä–∞–Ω–∏—Ç –≤—Å–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ –ø–µ—Ä–µ–¥–∞–µ—Ç –∏—Ö —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—É.

#### 1.1 –°–æ–∑–¥–∞–π—Ç–µ `.env` —Ñ–∞–π–ª –±—ç–∫–µ–Ω–¥–∞:

```env
# Server
PORT=3001

# Supabase (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û)
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_SERVICE_KEY=your-service-role-key
SUPABASE_ANON_KEY=your-anon-public-key

# Meta WhatsApp Cloud API (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û)
META_ACCESS_TOKEN=your-permanent-access-token
META_PHONE_NUMBER_ID=your-phone-number-id
META_BUSINESS_ACCOUNT_ID=your-business-account-id
META_WEBHOOK_VERIFY_TOKEN=your-webhook-verify-token

# Redis
REDIS_URL=redis://localhost:6379
```

#### 1.2 –ë—ç–∫–µ–Ω–¥ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ:

```javascript
const requiredEnvVars = [
  'SUPABASE_URL',
  'SUPABASE_SERVICE_KEY',
  'SUPABASE_ANON_KEY',
  'META_ACCESS_TOKEN',
  'META_PHONE_NUMBER_ID',
  'META_BUSINESS_ACCOUNT_ID',
  'META_WEBHOOK_VERIFY_TOKEN',
];
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Supabase

#### 2.1 –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç –≤ [Supabase](https://supabase.com)

#### 2.2 –í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü

–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **SQL Editor** –≤ Supabase –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ SQL-—Å—Ö–µ–º—É.
–í –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ **Settings** –µ—Å—Ç—å –∫–Ω–æ–ø–∫–∞ **"–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å SQL —Å—Ö–µ–º—É"**.

### 3. –ó–∞–ø—É—Å–∫ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
bun install

# –ó–∞–ø—É—Å–∫
bun run dev
```

#### 3.1 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ URL –±—ç–∫–µ–Ω–¥–∞

–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ —É–∫–∞–∂–∏—Ç–µ URL –±—ç–∫–µ–Ω–¥–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:

```javascript
localStorage.setItem('backend_api_url', 'http://localhost:3001/api');
```

–ò–ª–∏ —á–µ—Ä–µ–∑ Settings ‚Üí Backend API –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏.

**–§—Ä–æ–Ω—Ç–µ–Ω–¥ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Supabase –æ—Ç –±—ç–∫–µ–Ω–¥–∞ —á–µ—Ä–µ–∑ `GET /api/config`.**

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±—ç–∫–µ–Ω–¥–∞ (–æ—Ç–¥–µ–ª—å–Ω—ã–π –ø—Ä–æ–µ–∫—Ç)

–°–º. [docs/BACKEND_SPEC.md](docs/BACKEND_SPEC.md) –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è.

#### 4.1 –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –±—ç–∫–µ–Ω–¥–∞

```env
# Server
PORT=3001
NODE_ENV=development

# Supabase (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ SERVICE_ROLE key!)
SUPABASE_URL=https://YOUR_PROJECT_ID.supabase.co
SUPABASE_SERVICE_KEY=your-service-role-key

# Meta WhatsApp Cloud API
META_ACCESS_TOKEN=your-permanent-access-token
META_PHONE_NUMBER_ID=your-phone-number-id
META_BUSINESS_ACCOUNT_ID=your-business-account-id
META_WEBHOOK_VERIFY_TOKEN=your-webhook-verify-token

# Redis
REDIS_URL=redis://localhost:6379
```

> **–í–∞–∂–Ω–æ:** –ë—ç–∫–µ–Ω–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `SERVICE_ROLE` key, –∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ - `ANON` key!

### 5. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Meta WhatsApp

#### 5.1 –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ [Meta for Developers](https://developers.facebook.com)

1. –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ç–∏–ø–∞ "Business"
2. –î–æ–±–∞–≤—å—Ç–µ –ø—Ä–æ–¥—É–∫—Ç "WhatsApp"
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π –Ω–æ–º–µ—Ä –∏–ª–∏ –ø–æ–¥–∫–ª—é—á–∏—Ç–µ –±–∏–∑–Ω–µ—Å-–Ω–æ–º–µ—Ä

#### 5.2 –ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω—ã

- **Access Token:** App Dashboard ‚Üí WhatsApp ‚Üí API Setup
- **Phone Number ID:** App Dashboard ‚Üí WhatsApp ‚Üí API Setup
- **Business Account ID:** App Dashboard ‚Üí WhatsApp ‚Üí API Setup

#### 5.3 –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Webhook

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ App Dashboard ‚Üí WhatsApp ‚Üí Configuration
2. –£–∫–∞–∂–∏—Ç–µ Callback URL: `https://your-backend.com/api/webhook`
3. –£–∫–∞–∂–∏—Ç–µ Verify Token: –≤–∞—à `META_WEBHOOK_VERIFY_TOKEN`
4. –ü–æ–¥–ø–∏—à–∏—Ç–µ—Å—å –Ω–∞ —Å–æ–±—ã—Ç–∏—è: `messages`, `message_status`

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
src/
‚îú‚îÄ‚îÄ components/          # React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ layout/         # Layout –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (Sidebar, TopBar)
‚îÇ   ‚îî‚îÄ‚îÄ ui/             # UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (shadcn)
‚îú‚îÄ‚îÄ hooks/              # React —Ö—É–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ useAuth.ts      # –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ useBackendCampaigns.ts
‚îÇ   ‚îú‚îÄ‚îÄ useBackendChats.ts
‚îÇ   ‚îú‚îÄ‚îÄ useBackendContacts.ts
‚îÇ   ‚îî‚îÄ‚îÄ useBackendTemplates.ts
‚îú‚îÄ‚îÄ lib/
‚îÇ   ‚îú‚îÄ‚îÄ api.ts          # API –¥–ª—è –ø—Ä—è–º–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ Supabase
‚îÇ   ‚îú‚îÄ‚îÄ backend-api.ts  # API –¥–ª—è –±—ç–∫–µ–Ω–¥-—Å–µ—Ä–≤–µ—Ä–∞
‚îÇ   ‚îú‚îÄ‚îÄ supabase.ts     # Supabase –∫–ª–∏–µ–Ω—Ç
‚îÇ   ‚îî‚îÄ‚îÄ utils.ts        # –£—Ç–∏–ª–∏—Ç—ã
‚îú‚îÄ‚îÄ pages/              # –°—Ç—Ä–∞–Ω–∏—Ü—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ Dashboard.tsx   # –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
‚îÇ   ‚îú‚îÄ‚îÄ Broadcasts.tsx  # –°–ø–∏—Å–æ–∫ –∫–∞–º–ø–∞–Ω–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ CreateBroadcast.tsx  # –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞–º–ø–∞–Ω–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ Chats.tsx       # –ß–∞—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ Templates.tsx   # –®–∞–±–ª–æ–Ω—ã
‚îÇ   ‚îú‚îÄ‚îÄ Contacts.tsx    # –ö–æ–Ω—Ç–∞–∫—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ Logs.tsx        # –õ–æ–≥–∏
‚îÇ   ‚îî‚îÄ‚îÄ Settings.tsx    # –ù–∞—Å—Ç—Ä–æ–π–∫–∏
‚îî‚îÄ‚îÄ types/
    ‚îî‚îÄ‚îÄ database.ts     # TypeScript —Ç–∏–ø—ã –¥–ª—è –ë–î
```

## üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Supabase Auth —Å email/password.

### –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
1. –ù–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ `/auth`
2. –ü–æ–ª—É—á–∞–µ—Ç —Ä–æ–ª—å `user` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (–Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ—É–Ω–∫—Ü–∏—è–º)
3. –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –≤—Ä—É—á–Ω—É—é –º–µ–Ω—è–µ—Ç —Ä–æ–ª—å –≤ Supabase

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

```sql
-- –ù–∞–π—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
SELECT id, email FROM auth.users WHERE email = 'user@example.com';

-- –î–æ–±–∞–≤–∏—Ç—å —Ä–æ–ª—å admin
INSERT INTO public.user_roles (user_id, role)
VALUES ('user-uuid', 'admin');

-- –ò–ª–∏ manager
INSERT INTO public.user_roles (user_id, role)
VALUES ('user-uuid', 'manager');
```

### –†–æ–ª–∏

| –†–æ–ª—å | –ü—Ä–∞–≤–∞ |
|------|-------|
| `admin` | –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø |
| `manager` | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞–º–ø–∞–Ω–∏—è–º–∏ –∏ –∫–æ–Ω—Ç–∞–∫—Ç–∞–º–∏ |
| `user` | –¢–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) |

## üîÑ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

### –®–∞–±–ª–æ–Ω—ã
–®–∞–±–ª–æ–Ω—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è –∏–∑ Meta —á–µ—Ä–µ–∑ –±—ç–∫–µ–Ω–¥:
1. –ù–∞–∂–º–∏—Ç–µ "–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å" –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ Templates
2. –ë—ç–∫–µ–Ω–¥ –∑–∞–ø—Ä–æ—Å–∏—Ç —à–∞–±–ª–æ–Ω—ã –∏–∑ Meta API
3. –®–∞–±–ª–æ–Ω—ã —Å–æ—Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö

### –ß–∞—Ç—ã
–í—Ö–æ–¥—è—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ—Å—Ç—É–ø–∞—é—Ç —á–µ—Ä–µ–∑ webhook:
1. Meta –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–±—ã—Ç–∏–µ –Ω–∞ `/api/webhook`
2. –ë—ç–∫–µ–Ω–¥ —Å–æ–∑–¥–∞–µ—Ç/–æ–±–Ω–æ–≤–ª—è–µ—Ç —á–∞—Ç –∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –ë–î
3. –§—Ä–æ–Ω—Ç–µ–Ω–¥ –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ polling (–∫–∞–∂–¥—ã–µ 5-10 —Å–µ–∫)

## üìä –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã

| –¢–∞–±–ª–∏—Ü–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| `contacts` | –ö–æ–Ω—Ç–∞–∫—Ç—ã (—Ç–µ–ª–µ—Ñ–æ–Ω—ã, –∏–º–µ–Ω–∞, —Ç–µ–≥–∏) |
| `contact_lists` | –°–ø–∏—Å–∫–∏ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ |
| `contact_list_members` | –°–≤—è–∑—å –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ –∏ —Å–ø–∏—Å–∫–æ–≤ |
| `templates` | WhatsApp —à–∞–±–ª–æ–Ω—ã –∏–∑ Meta |
| `campaigns` | –ö–∞–º–ø–∞–Ω–∏–∏ —Ä–∞—Å—Å—ã–ª–æ–∫ |
| `campaign_recipients` | –ü–æ–ª—É—á–∞—Ç–µ–ª–∏ –∫–∞–º–ø–∞–Ω–∏–∏ —Å–æ —Å—Ç–∞—Ç—É—Å–∞–º–∏ |
| `message_queue` | –û—á–µ—Ä–µ–¥—å —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ |
| `chats` | –ß–∞—Ç-—Å–µ—Å—Å–∏–∏ |
| `messages` | –°–æ–æ–±—â–µ–Ω–∏—è –≤ —á–∞—Ç–∞—Ö |
| `activity_logs` | –õ–æ–≥–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ |
| `settings` | –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è |
| `user_roles` | –†–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π |

## üõ†Ô∏è –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

```bash
# –§—Ä–æ–Ω—Ç–µ–Ω–¥
bun run dev

# –ë—ç–∫–µ–Ω–¥ (–≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ)
cd backend
npm run dev
```

### –°–±–æ—Ä–∫–∞

```bash
bun run build
```

### –õ–∏–Ω—Ç–∏–Ω–≥

```bash
bun run lint
```

## üìù API Endpoints (Backend)

| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|----------|
| GET | `/api/templates` | –°–ø–∏—Å–æ–∫ —à–∞–±–ª–æ–Ω–æ–≤ |
| POST | `/api/templates/sync` | –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∏–∑ Meta |
| GET | `/api/campaigns` | –°–ø–∏—Å–æ–∫ –∫–∞–º–ø–∞–Ω–∏–π |
| POST | `/api/campaigns` | –°–æ–∑–¥–∞—Ç—å –∫–∞–º–ø–∞–Ω–∏—é |
| POST | `/api/campaigns/:id/start` | –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–∞–º–ø–∞–Ω–∏—é |
| POST | `/api/campaigns/:id/pause` | –ü—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å |
| POST | `/api/campaigns/:id/stop` | –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å |
| GET | `/api/contacts` | –°–ø–∏—Å–æ–∫ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ |
| POST | `/api/contacts/import` | –ò–º–ø–æ—Ä—Ç –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ |
| GET | `/api/chats` | –°–ø–∏—Å–æ–∫ —á–∞—Ç–æ–≤ |
| POST | `/api/chats/:id/messages` | –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ |
| GET | `/api/logs` | –õ–æ–≥–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ |
| GET | `/api/settings/status` | –°—Ç–∞—Ç—É—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π |

–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API: [docs/BACKEND_SPEC.md](docs/BACKEND_SPEC.md)

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–ë—ç–∫–µ–Ω–¥ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω** - —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å Meta API –Ω–∞–ø—Ä—è–º—É—é
2. **Service Role Key** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ –Ω–∞ –±—ç–∫–µ–Ω–¥–µ, –Ω–∏–∫–æ–≥–¥–∞ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ
3. **Webhook HTTPS** - Meta —Ç—Ä–µ–±—É–µ—Ç HTTPS –¥–ª—è webhooks (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ ngrok –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
4. **Rate Limits** - Meta –∏–º–µ–µ—Ç –ª–∏–º–∏—Ç—ã –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –¥–µ–Ω—å
5. **24h Window** - –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ –º–æ–∂–Ω–æ —Ç–æ–ª—å–∫–æ –≤ —Ç–µ—á–µ–Ω–∏–µ 24 —á–∞—Å–æ–≤

## üîß Troubleshooting

### –û—à–∏–±–∫–∞ "Backend server unavailable"
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –±—ç–∫–µ–Ω–¥ –∑–∞–ø—É—â–µ–Ω –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω–æ–º URL
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±—ç–∫–µ–Ω–¥–∞

### –®–∞–±–ª–æ–Ω—ã –Ω–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `META_ACCESS_TOKEN` –Ω–∞ –±—ç–∫–µ–Ω–¥–µ
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `META_BUSINESS_ACCOUNT_ID`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –±—ç–∫–µ–Ω–¥–∞

### –°–æ–æ–±—â–µ–Ω–∏—è –Ω–µ –¥–æ—Ö–æ–¥—è—Ç
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ webhook –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ Meta
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ webhook URL –¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

Private - Amprio Milano
