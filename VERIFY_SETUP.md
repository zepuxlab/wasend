# ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–æ–≤–µ—Ä–∫–∏

–ï—Å–ª–∏ –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã –æ—Ç–º–µ—á–µ–Ω—ã –∫–∞–∫ "‚úÖ –ù—É–∂–Ω–∞", –∑–Ω–∞—á–∏—Ç **–≤—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–Ω—ã**!

## üîç –ß—Ç–æ –µ—â–µ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:

### 1. –¢–∏–ø—ã (ENUM) - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ
–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å–æ–∑–¥–∞–Ω—ã –≤—Å–µ —Ç–∏–ø—ã:
- ‚úÖ `app_role` - ('admin', 'manager', 'user')
- ‚úÖ `campaign_status` - ('draft', 'ready', 'running', 'paused', 'stopped', 'completed', 'failed')
- ‚úÖ `message_status` - ('pending', 'queued', 'sent', 'delivered', 'read', 'failed')
- ‚úÖ `template_status` - ('approved', 'pending', 'rejected')
- ‚úÖ `message_direction` - ('inbound', 'outbound')
- ‚úÖ `message_type` - ('text', 'template', 'image', 'document')
- ‚úÖ `chat_status` - ('open', 'closed')

**–ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:** –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø–µ—Ä–≤—É—é —á–∞—Å—Ç—å —Å–∫—Ä–∏–ø—Ç–∞ `CHECK_STRUCTURE.sql`

### 2. –í–∞–∂–Ω—ã–µ –∫–æ–ª–æ–Ω–∫–∏ –≤ —Ç–∞–±–ª–∏—Ü–∞—Ö

#### campaigns
- ‚úÖ `rate_limit_per_batch` - INTEGER
- ‚úÖ `rate_limit_delay_seconds` - INTEGER  
- ‚úÖ `variable_mapping` - JSONB
- ‚úÖ `status` - campaign_status

#### campaign_recipients
- ‚úÖ `status` - message_status
- ‚úÖ `variables` - JSONB
- ‚úÖ `whatsapp_message_id` - TEXT

#### contacts
- ‚úÖ `opt_in` - BOOLEAN
- ‚úÖ `tags` - TEXT[]
- ‚úÖ `custom_fields` - JSONB

**–ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:** –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤—Ç–æ—Ä—É—é —á–∞—Å—Ç—å —Å–∫—Ä–∏–ø—Ç–∞ `CHECK_STRUCTURE.sql`

### 3. –§—É–Ω–∫—Ü–∏–∏ - –∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ
- ‚úÖ `has_role()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ `get_user_role()` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Ä–æ–ª–∏
- ‚úÖ `update_campaign_stats()` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- ‚úÖ `update_updated_at()` - –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ timestamp

**–ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:** –ó–∞–ø—É—Å—Ç–∏—Ç–µ —á–µ—Ç–≤–µ—Ä—Ç—É—é —á–∞—Å—Ç—å —Å–∫—Ä–∏–ø—Ç–∞ `CHECK_STRUCTURE.sql`

### 4. –ò–Ω–¥–µ–∫—Å—ã - –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- ‚úÖ `idx_campaigns_status` –Ω–∞ `campaigns(status)`
- ‚úÖ `idx_recipients_campaign` –Ω–∞ `campaign_recipients(campaign_id)`
- ‚úÖ `idx_recipients_status` –Ω–∞ `campaign_recipients(status)`
- ‚úÖ `idx_contacts_phone` –Ω–∞ `contacts(phone)`
- ‚úÖ `idx_contacts_opt_in` –Ω–∞ `contacts(opt_in)`

**–ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:** –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç—Ä–µ—Ç—å—é —á–∞—Å—Ç—å —Å–∫—Ä–∏–ø—Ç–∞ `CHECK_STRUCTURE.sql`

### 5. RLS (Row Level Security) - –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- ‚úÖ –î–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–∫–ª—é—á–µ–Ω –Ω–∞ –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü–∞—Ö —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏

**–ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:** –ó–∞–ø—É—Å—Ç–∏—Ç–µ —à–µ—Å—Ç—É—é —á–∞—Å—Ç—å —Å–∫—Ä–∏–ø—Ç–∞ `CHECK_STRUCTURE.sql`

## üöÄ –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

–ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤–µ—Å—å —Å–∫—Ä–∏–ø—Ç `CHECK_STRUCTURE.sql` –≤ Supabase SQL Editor, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å:
1. –ö–∞–∫–∏–µ —Ç–∏–ø—ã —Å–æ–∑–¥–∞–Ω—ã
2. –ö–∞–∫–∏–µ –∫–æ–ª–æ–Ω–∫–∏ –µ—Å—Ç—å –≤ —Ç–∞–±–ª–∏—Ü–∞—Ö
3. –ö–∞–∫–∏–µ –∏–Ω–¥–µ–∫—Å—ã —Å–æ–∑–¥–∞–Ω—ã
4. –ö–∞–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –µ—Å—Ç—å
5. –ö–∞–∫–∏–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç
6. –í–∫–ª—é—á–µ–Ω –ª–∏ RLS

## ‚ö†Ô∏è –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç

–ï—Å–ª–∏ –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—ã –≤–∏–¥–∏—Ç–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
1. –û—Ç–∫—Ä–æ–π—Ç–µ `frontend/src/pages/Settings.tsx`
2. –ù–∞–π–¥–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å SQL —Å—Ö–µ–º—É"
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–æ–ª–Ω—É—é SQL —Å—Ö–µ–º—É
4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –µ—ë –≤ Supabase SQL Editor

**–í–∞–∂–Ω–æ:** SQL —Å—Ö–µ–º–∞ —Å–æ–∑–¥–∞—Å—Ç –≤—Å–µ –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, –Ω–æ –Ω–µ —É–¥–∞–ª–∏—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ.

## ‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –¥–ª—è —Ä–∞–±–æ—Ç—ã

–î–ª—è –±–∞–∑–æ–≤–æ–π —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ:
- ‚úÖ –í—Å–µ 13 —Ç–∞–±–ª–∏—Ü —Å–æ–∑–¥–∞–Ω—ã
- ‚úÖ –í—Å–µ 7 —Ç–∏–ø–æ–≤ (ENUM) —Å–æ–∑–¥–∞–Ω—ã
- ‚úÖ –ö–ª—é—á–µ–≤—ã–µ –∫–æ–ª–æ–Ω–∫–∏ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç

–§—É–Ω–∫—Ü–∏–∏, —Ç—Ä–∏–≥–≥–µ—Ä—ã –∏ –∏–Ω–¥–µ–∫—Å—ã —É–ª—É—á—à–∞—é—Ç —Ä–∞–±–æ—Ç—É, –Ω–æ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω—ã –¥–ª—è —Å—Ç–∞—Ä—Ç–∞.

